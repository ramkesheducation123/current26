<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
    <style>
    
    A {text-decoration: none;}
 html {
overflow: scroll;
overflow-x: hidden;
}
::-webkit-scrollbar {
    display: none;
    scrollbar-width: 0px;
}
*::-webkit-scrollbar {
            display: none; /* ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤ ‡§¨‡§æ‡§∞ ‡§ï‡•ã ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§π‡§ü‡§æ ‡§¶‡•á‡§®‡§æ */
            width: 0px;
            height: 0px;
            /* remove scrollbar space /
}
/ optional: show position indicator in red */
::-webkit-scrollbar-thumb 
}

        body {
            font-family:Noto Serif Devanagari !important;
            background:#E3EDF7;
            user-select:none;
            -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; box-sizing: border-box; content: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

       .news-container {
            width: 100%;
            box-shadow:
      0 2px 10px rgba(0, 0, 0, 0.80),
      2px 2px 10px rgba(150, 170, 190, 0.35),
      inset 0 0 2px rgba(255, 255, 255, 0.3);

            height: 95vh;
            border-radius:10px;
            margin:10px;
            overflow: hidden;
            position: relative;
            background: white;
            perspective: 1000px;
           
        }
        .news-card {
            width: auto;
            height: 100%;
             border-radius: 10px 10px 5px 5px ; 
            position: absolute;
            background:white;
            font-family:Noto Serif Devanagari !important;
             padding: 12px;
            text-align: left;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden;
            align-items: center;
            user-select: none;
      transform-origin: bottom right;
    backface-visibility: hidden;
    transform-style: preserve-3d;
}

.news-flip-up {
    animation: pageFlipUp 0.30s ease forwards;
}

@keyframes pageFlipUp {
    0% {
        transform: rotateX(0deg) rotateZ(0deg) translateY(0);
        opacity: 1;
    }
    50% {
        transform: rotateX(-55deg) rotateZ(4deg) translateY(-20px);
        opacity: 0.7;
    }
    100% {
        transform: rotateX(-90deg) rotateZ(8deg) translateY(-100px);
        opacity: 0;
    }
}

/* Swipe DOWN ‚Üí Previous Page */
.news-flip-down {
    animation: pageFlipDown 0.30s ease forwards;
}

@keyframes pageFlipDown {
    0% {
        transform: rotateX(0deg) rotateZ(0deg) translateY(0);
        opacity: 1;
    }
    50% {
        transform: rotateX(45deg) rotateZ(-4deg) translateY(20px);
        opacity: 0.7;
    }
    100% {
        transform: rotateX(90deg) rotateZ(-8deg) translateY(100px);
        opacity: 0;
    }
}

/* Next page appearing from UNDER */
.news-appear {
    animation: pageAppear 0.15s ease forwards;
    opacity: 0;
}

@keyframes pageAppear {
    0% {
        transform: rotateX(65deg) rotateZ(-5deg) translateY(40px);
        opacity: 0.3;
    }
    80% {
        transform: rotateX(10deg) rotateZ(0deg);
        opacity: 1;
    }
    100% {
        transform: rotateX(0deg);
        opacity: 1;
    }
}

      
         img {
            max-width: 100% !important;
            top:0px;
            z-index:-1;
            position:absolute;
            left:0;
            border-radius: 0px;
        }
        h2 {
            margin: 0;
            width:100%;
            font-size: 15.5px;
            color:#FFD333;
            background:linear-gradient(180deg,rgba(0, 0, 0, 0.90) 80%, rgba(255, 255, 255, 1) 100%);
            font-weight:700;
            font-family:Noto Serif Devanagari !important;
            padding:12px 18px 20px 12px;
            border-radius: 10px 10px 0px 0px;
            margin-top:-10px;
            z-index:1;
        }
        
        p {
    color: #000;
    width: 92%;
    background: linear-gradient(180deg,rgba(255, 249, 212, 0.74) 0%, rgba(255, 255, 255, 1) 0%);
    line-height: 1.6;
    font-family: Noto Serif Devanagari !important;
    padding:10px 10px 20px 12px;
    margin-top:-15px;
    z-index:100000;
    align-items: center;
}

span {
    color: #000;
    padding:0px 0px 20px 0px;
    font-family: Noto Serif Devanagari !important;
}
      
        .publish-time {
            font-size: 9px;
            color: gray;
            margin: 0px 0;
            position: absolute;
            bottom:90px;
            right: 15px;
            
        }
        
         #loadingScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    visibility: hidden;
}

.spinner {
    border: 6px solid red;
    border-top: 6px solid yellow;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
}        
 
.loader {
    position: fixed;
     top: 40%;
     left: 43%;
    width: 100%;
    height: 100%;
    background: transparent;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    font-family: sans-serif;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 6px solid black;
    border-top-color: orange;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

.loading-text {
    font-size: 12px;
    letter-spacing:1.5px;
    margin-top:20px;
    margin-left:-45px;
    color: #333;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.custom-card {
    width: 100% !important;
    height: 100%;
    background: linear-gradient(135deg, #ff9800, #ff5722);
    border-radius: 10px;
    text-align: center;
    padding:0px;
    color: white;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
}

.custom-card img {
    width: 100%;
    height: 102%;
    border-radius: 8px;
    left:0px;
    top: 0px;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.5);
}


#refreshPopup {
        position: fixed;
        margin-bottom: 13px;
        width:1px;
        margin-left:-48px;
        background: transparent;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        z-index: 1000000;
        opacity: 0;
        transition: bottom 0.3s ease-out, opacity 0.3s ease-out;
    }
    #refreshPopup button {
        background: red;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 50%;
    }
   
     .popup2-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        .popup2 {
            background: white;
            width: auto;
            padding: 20px;
            margin:20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .popup2 h2 {
            margin-top: 0;
            color:red;
        }
        .popup2 li {
            text-align: justify;
            font-family:kadwa;
            margin-left:-30px;
            font-size:12px;
        }
        .popup2-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        .popup2-footer input {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .popup2-footer label {
            font-size: 13px;
            font-weight:700;
            margin-right: 15px;
            color:blue;
            font-family:kadwa;
        }
        .close-btn2 {
            background: blue;
            color: white;
            padding: 8px 15px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-left: 10px;
            opacity: 0.5;
        }
        .close-btn2.active {
            opacity: 1;
            cursor: pointer;
        }
        /* üî¥ Checkbox ‡§î‡§∞ Consent Text Error (Shake & Red Border) */
        .checkbox-error {
            border: 2px solid red !important;
            animation: shake 0.3s ease-in-out;
        }
        .text-error {
            color: red !important;
            animation: shake 0.3s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        
    .bottom-bar {
      position: fixed;
      bottom: 0;
      width: 100%;
      font-family:kadwa;
      height: 65px;
      background: rgb(0,0,0,0.88);
      line-height:1.5;
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -3px 10px rgba(0,0,0,0.15);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      z-index: 100000;
    }

    .bottom-bar::before {
      content: '';
      position: absolute;
      top: 0px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 40px;
      background: #f4f4f4;
      border-radius: 0 0 30px 30px ;
      box-shadow: inset 0 10px 6px rgba(0, 0, 0, 0.1);
      z-index: -1;
    }

    .tab {
      text-align: center;
      flex: 1;
      padding: 6px 0;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .tab i {
      font-size: 20px;
      transition: transform 0.3s ease;
      color: #ccc;
    }

    .tab span111 {
      display: block;
      font-size: 9px;
      font-family:kadwa;
      font-weight:600;
      color: #ccc;
      margin-top: 1px;
    }

    .tab.active i,
    .tab.active span111 {
      color: orange;
    }

    .tab.middle {
      transform: translateY(-24px);
      margin-left:0.5px;
      z-index: 0;
    }

.tab.middle i {
      font-size: 15px;
      font-weight:700;
      background: #fff;
      width:24px;
      height:33px;
      border:1px solid rgb(0,0,0,0.4);
      color: #fff;
      padding: 10px 14px;
      border-radius: 50%;
     box-shadow: 0 -3px 10px rgba(0,0,0,0.15);
    }
    
.skeleton-container {
  padding: 14px;
  Margin-top:-20px;
}

.skeleton-card {
  background: #fff;
  border-radius: 12px;
  padding: 10px;
  width:310px;
  margin-bottom: 0px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.skeleton-image {
  height:210px;
  border-radius: 8px;
  background: linear-gradient(-90deg, #f0f0f0 0%, #e0e0e0 50%, #f0f0f0 100%);
  background-size: 400% 400%;
  animation: shimmer 1.2s infinite;
  margin-bottom: 12px;
}

.skeleton-title {
  height: 28px;
  width: 70%;
  border-radius: 4px;
  background: linear-gradient(-90deg, #f0f0f0 0%, #e0e0e0 50%, #f0f0f0 100%);
  background-size: 400% 400%;
  animation: shimmer 1.2s infinite;
  margin-bottom: 10px;
}

.skeleton-text {
  height: 12px;
  width: 90%;
  border-radius: 4px;
  background: linear-gradient(-90deg, #f0f0f0 0%, #e0e0e0 50%, #f0f0f0 100%);
  background-size: 400% 400%;
  animation: shimmer 1.2s infinite;
  margin-bottom: 8px;
}

.skeleton-text.short {
  width: 60%;
}

@keyframes shimmer {
  0% {
    background-position: 100% 0;
  }
  100% {
    background-position: -100% 0;
  }
}

.like-btn {
  position: absolute;
  bottom: 90px;
  left: 20px;
  color: #e74c3c;
  font-size: 20px;
  cursor: pointer;
  z-index: 999999;
}

.save-text{
font-size:10px;
font-family:kadwa;
}

.unread-badge {
  margin-left: -20px; /* ‡§•‡•ã‡§°‡§º‡§æ ‡§¶‡§æ‡§è‡§Å ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§§‡§æ‡§ï‡§ø ‡§Ü‡§á‡§ï‡•â‡§® ‡§® ‡§õ‡•Å‡§™‡•á */
  background: #000;
  width:46px;
  height:50px;
  border-radius: 50%; /* ‡§ó‡•ã‡§≤ ‡§ï‡•Ä ‡§ú‡§ó‡§π ‡§π‡§≤‡•ç‡§ï‡§æ ‡§ö‡•å‡§ï‡•ã‡§∞ */
  padding: 5px 8px; 
  flex-direction: column; /* ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§ä‡§™‡§∞-‡§®‡•Ä‡§ö‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
  align-items: center;
  text-align:center;
  justify-content: center;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(255, 59, 59, 0.4);
  border: 1px solid #fff; /* ‡§¨‡•â‡§∞‡•ç‡§°‡§∞ ‡§•‡•ã‡§°‡§º‡•Ä ‡§™‡§§‡§≤‡•Ä ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à */
  animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 10000000;
  white-space: nowrap; /* ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§è‡§ï ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
}


@keyframes bounceIn {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); }
}

    </style>
    <link href='https://fonts.googleapis.com/css?family=Kadwa' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Noto Serif Devanagari' rel='stylesheet'>
</head>
<body>

<div id="skeletonLoader" class="skeleton-container">
  <div class="skeleton-card">
    <div class="skeleton-image"></div>
    <div class="skeleton-title"></div>
    <div class="skeleton-text"></div>
    <div class="skeleton-text"></div>
    <div class="skeleton-text"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
    <div class="skeleton-text short"></div>
  </div></div>
 

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<!-- Bottom Bar -->
<div class="bottom-bar">
  <div class="tab active default-tab" data-url="go:home" data-code="home">
    <i class="fas fa-home"></i>
    <span111>Home</span111>
  </div>
  <div class="tab" data-url="GO:may" data-code="ca">
    <i class="fas fa-newspaper"></i>
    <span111>Current Affairs</span111>
  </div>
  
  <div class="tab middle" data-url="go:cmagazine" data-code="add">
  <i class="fas fa-book-open" style="color:#000;"><br><span1 style="font-size: 10px; font-weight: 900;">PYP</span1><span111 style="font-size: 10px; font-weight: 700; color:#FFBFD6; margin-top: -42px;" id="unreadBadge" class="unread-badge" style="display: none;"><br><br>0</span111></i>
  

</div>
  <div class="tab" data-url="go:quiz" data-code="quiz">
    <i class="fas fa-clipboard-question"></i>
    <span111>GK Quiz</span111>
  </div>
  <div class="tab" data-url="go:purchase" data-code="store">
  <i class="fas fa-cart-shopping"></i>
  <i class="fas fa-check fa-stack-1x" style="color:#000; font-size:10px;"></i>
    <span111>My Purchase</span111>
  </div>
</div>


<div id="loadingScreen"><div style="color:white; position:absolute; letter-spacing:1.5px; font-size:9px; margin-top:115px;">Fetching Latest Feed</div>
    <div class="spinner"></div>
</div>
<meta charset="UTF-8">
    <script src="script.js"></script>
 <div class="popup2-container" id="popup2">
        <div class="popup2">
            <h1 style="font-size:17px; color:red;">Instructions</h1>
           <ol><li> ‡§°‡•á‡§≤‡•Ä ‡§ï‡§∞‡•á‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏ ‡§ï‡•Ä <strong>‡§Ö‡§ó‡§≤‡•Ä ‡§´‡•Ä‡§°</strong> ‡§ï‡•ã ‡§™‡•ù‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è <strong>"‡§ä‡§™‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§è‡§Ç"</strong></li>
            <li> ‡§°‡•á‡§≤‡•Ä ‡§ï‡§∞‡•á‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏ ‡§ï‡•Ä <strong>‡§™‡§ø‡§õ‡§≤‡•Ä ‡§´‡•Ä‡§°</strong> ‡§ï‡•ã ‡§™‡•ù‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è <strong>"‡§®‡•Ä‡§ö‡•á ‡§∏‡§∞‡§ï‡§æ‡§è‡§Ç"</strong></li>
            <li> ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§´‡•Ä‡§° ‡§ï‡•ã Save ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è <i Style="color:red;" class="fas fa-heart-circle-plus"></i> icon ‡§™‡§∞ Tap ‡§ï‡§∞‡•á‡§Ç</li></ol>
        <p style=" font-size:13px; margin-top:10px; background:rgb(0,0,0,0.3); padding:5px 10px; border-radius:5px;">‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§Ø‡•ã‡§ó‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ‡§ì‡§Ç (UPSC, MPPSC, SSC, ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó, ‡§∞‡•á‡§≤‡§µ‡•á, ‡§™‡•Å‡§≤‡§ø‡§∏, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ (TET) ‡§Ü‡§¶‡§ø) ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡•ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§∞‡•á‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏ ‡§™‡•ù‡•á‡§Ç ‡§è‡§ï ‡§π‡•Ä ‡§ú‡§ó‡§π ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§§‡§•‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§•</p>
         <div class="popup2-footer">
                <input type="checkbox" id="consentCheckbox">
                <label for="consentCheckbox" id="consentLabel">‡§π‡§Æ ‡§∏‡§Æ‡§ù ‡§ó‡§è</label>
                <button class="close-btn2" id="closeBtn2">Close</button>
            </div>
        </div>
    </div>
<div id="loader" class="loader">
</div>
  </div>
</div>

<div class="news-container" id="newsContainer"></div>

<div id="noLikesBox" style="
  display:none; text-align:center; margin-top:40px; padding:40px 10px;
  color:#666; font-size:16px;">
  
  <svg width="80" height="80" viewBox="0 0 24 24" fill="none"
     xmlns="http://www.w3.org/2000/svg"
     stroke="#d23f3f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

  <!-- Heart shape -->
  <path d="M12 21s-6-4.35-9-8.5C-1.8 8.4 1.4 3 6 3
           c2.1 0 4 1.2 5 3c1-1.8 2.9-3 5-3
           c4.6 0 7.8 5.4 3 9.5
           c-3 4.15-9 8.5-9 8.5z"/>
  <!-- Slash line -->
  <line x1="3" y1="3" x2="21" y2="21" />
</svg>


  <div style="margin-top:12px; font-weight:600;">
     ‡§ï‡•ã‡§à ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•Ä ‡§ó‡§à ‡§´‡§º‡•Ä‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä
     <br><br><br>
     <button style="background:red; border:none; border-radius:5px; padding:5px 10px; font-weight:700; font-size:12px; color:#fff;" onclick="selectFeed(0)">‡§ï‡§∞‡•á‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏ ‡§™‡•ù‡•á‡§Ç</button>
  </div>
</div>

    <script>

let startY = 0, endY = 0, startX = 0, endX = 0;
let lastTouchY = 0;
let currentIndex = 0;
let articles = []; // ‡§Ü‡§™‡§ï‡§æ articles array loadNews() ‡§≠‡§∞‡§§‡§æ ‡§π‡•à
let totalSlidesBeforeRefresh = 12;
let readArticles = JSON.parse(localStorage.getItem('readNewsLinks') || '[]');
let unreadCount = 0;
const MIN_SWIPE = 60; // swipe threshold

// touch events (mobile)
document.addEventListener("touchstart", e => {
  const t = e.touches[0];
  startY = t.clientY;
  startX = t.clientX;
  lastTouchY = startY;
}, { passive: true });

document.addEventListener("touchmove", e => {
  const t = e.touches[0];
  lastTouchY = t.clientY;
}, { passive: true });

document.addEventListener("touchend", e => {
  const t = e.changedTouches[0];
  endY = lastTouchY || t.clientY;
  endX = t.clientX || startX;
  handleVerticalSwipe(); // ‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§§‡§æ‡§ï‡§ø ‡§ï‡•ã‡§à ‡§°‡•Å‡§™‡•ç‡§≤‡•Ä‡§ï‡•á‡§ü ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§® ‡§ì‡§µ‡§∞‡§∞‡§æ‡§á‡§° ‡§ï‡§∞‡•á
});

// mouse support (desktop): capture mousedown to set start, mouseup to set end
document.addEventListener("mousedown", e => {
  startY = e.clientY;
  startX = e.clientX;
});
document.addEventListener("mouseup", e => {
  endY = e.clientY;
  endX = e.clientX;
  handleVerticalSwipe();
});

// horizontal swipe open (optional) ‚Äî ‡§Ö‡§≤‡§ó ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§Ö‡§ó‡§∞ ‡§ö‡§æ‡§π‡•á‡§Ç
function handleHorizontalOpen() {
  const dx = endX - startX;
  if (dx < -100 && articles[currentIndex] && articles[currentIndex].link) {
    window.open(articles[currentIndex].link, "_blank");
  }
}

// Unified vertical swipe handler (up / down)
function handleVerticalSwipe() {
  // ‡§Ö‡§ó‡§∞ ‡§ï‡•ã‡§à active card ‡§® ‡§π‡•ã ‡§§‡•ã exit
  const activeCard = document.querySelector(".news-card.active");
  if (!activeCard) return;

  const diff = endY - startY;
  const abs = Math.abs(diff);

  // ignore small moves
  if (abs < MIN_SWIPE) {
    // ‡§õ‡•ã‡§ü‡§æ horizontal ‡§≠‡•Ä ‡§ö‡•á‡§ï ‡§ï‡§∞ ‡§≤‡•á‡§Ç
    const dx = Math.abs(endX - startX);
    if (dx > 100) handleHorizontalOpen();
    return;
  }

  if (diff < 0) {
    // swipe up => next
    showNextFlip();
  } else {
    // swipe down => prev
    showPrevFlip();
  }
}

/* Flip functions ‚Äî make sure these match the CSS animation durations (here 700ms) */
function showNextFlip() {
  if (currentIndex >= articles.length - 1) return;

  const oldCard = document.querySelector(".news-card.active");
  const nextCard = document.querySelector(`.news-card[data-index="${currentIndex + 1}"]`);

  if (!oldCard || !nextCard) return;

  // set transform origins for nicer corner roll
  oldCard.style.transformOrigin = 'bottom right';
  nextCard.style.transformOrigin = 'bottom right';

  // animate old card folding up (away)
  oldCard.classList.remove("active");
  oldCard.classList.add("news-flip-up");

  // prepare next card to appear from under with "paper" effect
  nextCard.style.opacity = "0";
  nextCard.classList.add("active", "news-appear");

  // increment index immediately so updateSlide repositions to the new index after animation
  currentIndex++;
  markAsRead(currentIndex);
  // cleanup after animation
  setTimeout(() => {
    oldCard.classList.remove("news-flip-up");
    nextCard.classList.remove("news-appear");
    nextCard.style.opacity = "1";
    updateSlide();
    if (currentIndex >= totalSlidesBeforeRefresh) showRefreshPopup();
  }, 700);
}

function showPrevFlip() {
  if (currentIndex <= 0) return;

  const oldCard = document.querySelector(".news-card.active");
  const prevCard = document.querySelector(`.news-card[data-index="${currentIndex - 1}"]`);

  if (!oldCard || !prevCard) return;

  // set transform origins for nicer corner roll (prev comes from top)
  oldCard.style.transformOrigin = 'top right';
  prevCard.style.transformOrigin = 'top right';

  // animate old card folding down (away)
  oldCard.classList.remove("active");
  oldCard.classList.add("news-flip-down");

  // prepare prev card to appear from under
  prevCard.style.opacity = "0";
  prevCard.classList.add("active", "news-appear");

  // decrement index immediately so updateSlide repositions after animation
  currentIndex--;
  markAsRead(currentIndex);

  // cleanup after animation
  setTimeout(() => {
    oldCard.classList.remove("news-flip-down");
    prevCard.classList.remove("news-appear");
    prevCard.style.opacity = "1";
    updateSlide();
  }, 700);
}

/* updateSlide() ‚Äî ‡§Ø‡§π ‡§Ü‡§™‡§ï‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á logic ‡§ï‡•ã reuse ‡§ï‡§∞‡§§‡§æ ‡§π‡•à */
function updateSlide() {
  const cards = document.querySelectorAll(".news-card");
  cards.forEach((card, index) => {
    card.style.transition = 'transform 0.5s ease';
    card.style.transform = `translateY(${(index - currentIndex) * 100}%)`;
  });
}

document.addEventListener("DOMContentLoaded", () => {
  updateTabUI();
  loadNews();
});


function refreshNewsFeed() {
    hideRefreshPopup();

    // Loader ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
    document.getElementById("loadingScreen")?.style.setProperty("visibility", "visible");
    document.getElementById("loader")?.style.setProperty("display", "block");

    const container = document.getElementById('newsContainer');
    container.style.transition = 'transform 0.3s ease';
    container.style.transform = 'translateY(100%)';

    setTimeout(() => {
        currentIndex = 0;
        articles = [];
        loadNews().then(() => {
            container.style.transform = 'translateY(0%)';

            // Loader ‡§õ‡•Å‡§™‡§æ‡§è‡§Ç
            document.getElementById("loadingScreen")?.style.setProperty("visibility", "hidden");
            document.getElementById("loader")?.style.setProperty("display", "none");
        });
    }, 500);
}

// Loader ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
document.getElementById("loader").style.display = "block";

loadNews().then(() => {
    // Loader ‡§π‡§ü‡§æ‡§è‡§Ç
    document.getElementById("loader").style.display = "none";
});

const rssFeeds = [
  {
    name: "‡§ü‡•ç‡§∞‡•á‡§Ç‡§°‡§ø‡§Ç‡§ó",
    urls: [
     "https://242310604.hs-sites-na2.com/tag/fact/rss.xml",
       "https://242310604.hs-sites-na2.com/tag/national/rss.xml"
    ]
  },
  
  {
    name: "‡§¶‡•á‡§∂/‡§µ‡§ø‡§¶‡•á‡§∂",
    urls: [
      "https://timesofindia.indiatimes.com/rssfeedstopstories.cms"
    ]
  },
 
  {
    name: "Saved Feed",
    urls: []
  }
];

let selectedFeedIndex = parseInt(localStorage.getItem("selectedFeed")) || 0;
let selectedLanguage = localStorage.getItem("selectedLanguage") || "en"; // üî∏ ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡§º‡•Ä

// Tabs ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§´‡•Ä‡§° ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
function selectFeed(index) {
  selectedFeedIndex = index;
  updateTabUI();
  refreshNewsFeed();
}

// Tab UI ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
function updateTabUI() {
  const buttons = document.querySelectorAll("#tabs button");
  buttons.forEach((btn, idx) => {
    btn.classList.toggle("active", idx === selectedFeedIndex);
  });
}

function updateUnreadBadge() {
    const badge = document.getElementById('unreadBadge');
    if (!badge) return;
    
    if (unreadCount > 0) {
        let countText = unreadCount > 99 ? '99+' : unreadCount;
        
        // ‡§ï‡§æ‡§â‡§Ç‡§ü ‡§ï‡•á ‡§ä‡§™‡§∞ "‡§¨‡§ø‡§®‡§æ ‡§™‡§¢‡§º‡•Ä" ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
        badge.innerHTML = `<span112 style="font-size: 10px; font-weight: 700; margin-top: 8px;">‡§¨‡§ø‡§®‡§æ ‡§™‡§¢‡§º‡•Ä</span112><span112 style="font-size: 12px; margin-top:5px;">${countText}</span112>`;
        
        badge.style.display = 'flex';
    } else {
        badge.style.display = 'none';
    }
}

function markAsRead(index) {
    const article = articles[index];
    
    if (article && article.link && !article.link.startsWith('go:')) {
        const link = article.link;
        
        // ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§™‡§¢‡§º‡•Ä ‡§ú‡§æ ‡§ö‡•Å‡§ï‡•Ä ‡§π‡•à
        if (!readArticles.includes(link)) {
            readArticles.push(link);
            
            // ‡§Æ‡•á‡§Æ‡•ã‡§∞‡•Ä ‡§¨‡§ö‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è 500 ‡§∏‡•á ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§π‡§ü‡§æ ‡§¶‡•á‡§Ç
            if(readArticles.length > 500) readArticles.shift();
            localStorage.setItem('readNewsLinks', JSON.stringify(readArticles));
            
            // --- 24 ‡§ò‡§Ç‡§ü‡•á ‡§µ‡§æ‡§≤‡§æ ‡§≤‡•â‡§ú‡§ø‡§ï ---
            const ONE_DAY_MS = 24 * 60 * 60 * 1000;
            const now = Date.now();
            const pubTime = new Date(article.pubDate).getTime();
            const isWithin24Hrs = (now - pubTime) <= ONE_DAY_MS;
            
            // ‡§Ö‡§ó‡§∞ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ï‡•Ä ‡§•‡•Ä, ‡§§‡•ã ‡§ï‡§æ‡§â‡§Ç‡§ü ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç
            if (isWithin24Hrs && unreadCount > 0) {
                unreadCount--;
                updateUnreadBadge();
            }
        }
    }
}

// üì∞ ‡§´‡•Ä‡§° ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó
async function loadNews() {
  const container = document.getElementById('newsContainer');

  if (selectedFeedIndex === 2) {
    articles = JSON.parse(localStorage.getItem("likedFeeds") || "[]");

    const noLikes = document.getElementById("noLikesBox");
    const container = document.getElementById("newsContainer");

    if (articles.length === 0) {
        // ‚≠ê ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ ‡§ñ‡§æ‡§≤‡•Ä ‡§ï‡§∞‡•ã
        container.innerHTML = "";

        // ‚≠ê No Likes Box ‡§ï‡•á‡§µ‡§≤ ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§ì
        container.appendChild(noLikes);
        noLikes.style.display = "block";

        return;
    } else {
        noLikes.style.display = "none";
    }
    
    // Saved Feed ‡§ü‡•à‡§¨ ‡§™‡§∞ Unread Badge ‡§®‡§π‡•Ä‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ ‡§π‡•à
    unreadCount = 0; 
    updateUnreadBadge();

    displayNews();
    setTimeout(autoFitText, 150);
    return;
  }

  const urls = rssFeeds[selectedFeedIndex].urls;
  document.getElementById("skeletonLoader").style.display = "block";
  document.getElementById("newsContainer").style.display = "none";

  try {
    let allItems = [];

    // ‚úÖ 3 LEVEL DUPLICATE PROTECTION
    let uniqueLinks = new Set();
    let uniqueDescriptions = new Set();
    let uniqueImages = new Set();

    for (const rssUrl of urls) {
      const proxyUrl = `https://sweet-base-34f7.kgfads100.workers.dev/?url=${encodeURIComponent(rssUrl)}`;
      const response = await fetch(proxyUrl);
      const text = await response.text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(text, "text/xml");

      let items = Array.from(xml.querySelectorAll("item")).map(item => ({
        title: item.querySelector("title")?.textContent || "",
        description: item.querySelector("description")?.textContent || "",
        link: item.querySelector("link")?.textContent || "",
        pubDate: item.querySelector("pubDate") ? new Date(item.querySelector("pubDate").textContent) : new Date(0),
        image: item.querySelector("enclosure")?.getAttribute("url") || ""
      }));
      
        // üåç ‡§ö‡•Å‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§≤‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
      const translatableSources = [
        "https://242310604.hs-sites-na2.com",
        "https://timesofindia.indiatimes.com"
      ];

      // ‚úÖ ALL FEEDS TRANSLATE (NO DOMAIN LIMIT)
       if (translatableSources.some(src => rssUrl.includes(src))) {
        console.log("üåê Translating feed to:", selectedLanguage);
        showTranslatingMessage();
        
        items = await Promise.all(
          items.map(async item => {
            item.title = await getCachedTranslation(item.title, selectedLanguage);
            item.description = await getCachedTranslation(item.description, selectedLanguage);
            return item;
          })
        );
        
        hideTranslatingMessage();
      }

      allItems = allItems.concat(items);
    }

    allItems.sort((a, b) => b.pubDate - a.pubDate);
    articles = allItems;

    // --- NEW LOGIC: 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ï‡•Ä Unread ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§ó‡§ø‡§®‡•á‡§Ç ---
    if (selectedFeedIndex === 0 || selectedFeedIndex === 1) {
        const ONE_DAY_MS = 24 * 60 * 60 * 1000;
        const now = Date.now();
        
        unreadCount = articles.filter(a => {
            // ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§ï‡§æ‡§∞‡•ç‡§°‡•ç‡§∏ (go: links) ‡§ï‡•ã ‡§õ‡•ã‡§°‡§º ‡§¶‡•á‡§Ç
            if (!a.link || a.link.startsWith('go:')) return false;
            
            // ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§™‡§ø‡§õ‡§≤‡•á 24 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•Ä ‡§π‡•à
            const pubTime = new Date(a.pubDate).getTime();
            const isWithin24Hrs = (now - pubTime) <= ONE_DAY_MS;
            
            // ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§™‡§¢‡§º‡•Ä ‡§ó‡§à ‡§π‡•à
            const isNotRead = typeof readArticles !== 'undefined' ? !readArticles.includes(a.link) : true;
            
            return isWithin24Hrs && isNotRead;
        }).length;
    } else {
        unreadCount = 0; // ‡§Ö‡§®‡•ç‡§Ø ‡§ü‡•à‡§¨ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•à‡§ú ‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
    }
    
    updateUnreadBadge();
    
    // ‡§™‡§π‡§≤‡•Ä ‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§ú‡•ã ‡§∏‡§æ‡§Æ‡§®‡•á ‡§¶‡§ø‡§ñ ‡§∞‡§π‡•Ä ‡§π‡•à ‡§â‡§∏‡•á ‡§§‡•Å‡§∞‡§Ç‡§§ Read ‡§Æ‡§æ‡§∞‡•ç‡§ï ‡§ï‡§∞ ‡§¶‡•á‡§Ç
    setTimeout(() => { if(typeof markAsRead === 'function') markAsRead(0); }, 500);
    // -----------------------------------------

    insertCustomCards();
    displayNews();
    setTimeout(autoFitText, 150);

  } catch (error) {
    console.error("Error loading RSS Feeds", error);
  } finally {
    document.getElementById("skeletonLoader").style.display = "none";
    document.getElementById("newsContainer").style.display = "block";
  }
}

// üîÅ Cached Translation System
async function getCachedTranslation(text, lang) {
  if (!text || text.trim() === "") return "";

  // ‚ùå LocalStorage cache ‡§π‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ
  const translated = await googleTranslate(text, lang);
  return translated || text;
}

// üåê Google Translate Wrapper
async function googleTranslate(text, lang) {
  try {
    const apiUrl = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${lang}&dt=t&q=${encodeURIComponent(text)}`;
    const res = await fetch(apiUrl);
    const data = await res.json();
    let translated = data[0].map(x => x[0]).join(" ");

    translated = translated
      .replace(/'/g, "'")
      .replace(/"/g, '"')
      .replace(/undefined/g, "")
      .replace(/\s+/g, " ")
      .trim();

    if (translated.split(" ").length < 3) {
      translated = await backupTranslate(text, lang);
    }

    return translated;
  } catch (err) {
    console.error("Translate Error:", err);
    return text;
  }
}

// üß≠ Backup Translator
async function backupTranslate(text, lang) {
  try {
    const res = await fetch("https://translate.terraprint.co/translate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        q: text,
        source: "auto",
        target: lang,
        format: "text"
      })
    });
    const data = await res.json();
    return data.translatedText || text;
  } catch (e) {
    console.error("Backup translation failed:", e);
    return text;
  }
}
// üåê Popup ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å
function showLanguagePopup() {
  // ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§ñ‡•Å‡§≤‡§æ popup ‡§π‡•ã ‡§§‡•ã remove ‡§ï‡§∞‡•á‡§Ç
  const existing = document.getElementById("langOverlay");
  if (existing) existing.remove();

  // Overlay ‡§¨‡§®‡§æ‡§è‡§Ç
  const overlay = document.createElement("div");
  overlay.id = "langOverlay";
  overlay.style = `
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.76);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    animation: fadeIn 0.4s ease;
  `;

  // Popup content ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
  const popup = document.createElement("div");
  popup.innerHTML = `
  <div id="langPopup" style="
    position: relative;
    background: linear-gradient(145deg, #ffffff, #f0f4ff);
    padding: 25px 20px 22px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.18);
    text-align: center;
    animation: jelloIn 0.8s ease;
    width: 280px;
    backdrop-filter: blur(10px);
    font-family: 'Segoe UI', sans-serif;
  ">

    <!-- Close Icon -->
    <span111 id="closeLangPopup" style="
      position: absolute;
      top: 12px;
      right: 16px;
      font-size: 18px;
      font-weight: 600;
      color: #888;
      cursor: pointer;
      transition: 0.3s;
    " onmouseover="this.style.color='#ff3b3b'" 
       onmouseout="this.style.color='#888'">‚úï</span111>
      
     <h3 style="
      margin-bottom:18px;
      font-size:18px;
      font-weight:600;
      background: linear-gradient(90deg,#007bff,#00c6ff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      letter-spacing:0.5px;
    ">
      Select Language
    </h3>

    <!-- Buttons Container -->
    <div style="display:flex; flex-direction:column; gap:12px;">

      <button id="langHi" style="
        background: linear-gradient(135deg,#007bff,#0056d2);
        color:#fff;
        border:none;
        padding:10px;
        border-radius:12px;
        font-size:14px;
        font-weight:600;
        cursor:pointer;
        transition:0.3s;
        box-shadow:0 4px 12px rgba(0,123,255,0.3);
      " 
      onmouseover="this.style.transform='translateY(-2px)'" 
      onmouseout="this.style.transform='translateY(0)'">
        üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä
      </button>

      <button id="langEn" style="
        background: linear-gradient(135deg,#28a745,#1e7e34);
        color:#fff;
        border:none;
        padding:10px;
        border-radius:12px;
        font-size:14px;
        font-weight:600;
        cursor:pointer;
        transition:0.3s;
        box-shadow:0 4px 12px rgba(40,167,69,0.3);
      "
      onmouseover="this.style.transform='translateY(-2px)'" 
      onmouseout="this.style.transform='translateY(0)'">
       üá¶üá∫ English
      </button>

    </div>

    <!-- Current Language Info -->
    <p style="
      margin-top:16px;
      font-size:12px;
      color:#666;
      background:#f5f7ff;
      padding:6px 10px;
      border-radius:8px;
    ">
      Current Language: 
      <b style="color:#007bff;">
        ${selectedLanguage === "hi" ? "Hindi" : "English"}
      </b>
    </p>

  </div>
`;

  overlay.appendChild(popup);
  document.body.appendChild(overlay);

  // Close icon ‡§î‡§∞ overlay click ‡§™‡§∞ popup ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
  const closePopup = () => {
    const popupEl = document.getElementById("langPopup");
    popupEl.style.animation = "jelloOut 0.6s ease";
    overlay.style.animation = "fadeOut 0.4s ease";

    setTimeout(() => overlay.remove(), 400);
  };

  document.getElementById("closeLangPopup").onclick = closePopup;
  overlay.onclick = (e) => { if (e.target === overlay) closePopup(); };

  // ‡§¨‡§ü‡§® ‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏
  document.getElementById("langHi").onclick = () => changeLanguage("hi", overlay);
  document.getElementById("langEn").onclick = () => changeLanguage("en", overlay);

  // ‚ú® CSS Animations inject ‡§ï‡§∞‡•á‡§Ç (‡§Ö‡§ó‡§∞ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç)
  if (!document.getElementById("jelloAnimationStyle")) {
    const style = document.createElement("style");
    style.id = "jelloAnimationStyle";
    style.textContent = `
      @keyframes jelloIn {
        0% { transform: scale(0.8) rotate(0deg); opacity: 0; }
        25% { transform: scale(1.1) rotate(2deg); opacity: 1; }
        50% { transform: scale(0.95) rotate(-2deg); }
        75% { transform: scale(1.05) rotate(1deg); }
        100% { transform: scale(1) rotate(0deg); }
      }

      @keyframes jelloOut {
        0% { transform: scale(1) rotate(0deg); opacity: 1; }
        25% { transform: scale(1.05) rotate(-2deg); }
        50% { transform: scale(0.9) rotate(2deg); }
        100% { transform: scale(0.7) rotate(0deg); opacity: 0; }
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  }
}


// üà≥ ‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç
function changeLanguage(lang, popup) {
  localStorage.setItem("selectedLanguage", lang);
  selectedLanguage = lang;
  popup.remove();
  showTranslatingMessage();
  setTimeout(() => {
    loadNews();
  }, 500);
}

// üïê Translating Message
function showTranslatingMessage() {
  let msg = document.createElement("div");
  msg.style.position = "fixed";
  msg.style.background = "transparent";
  msg.style.color = "#fff";
  document.body.appendChild(msg);
}

function hideTranslatingMessage() {
  const msg = document.getElementById("translatingMsg");
  if (msg) msg.remove();
}

// --------------------------
// üåü Initialization
// --------------------------
document.addEventListener("DOMContentLoaded", () => {
  addTranslateIcon();
  loadNews(); // ‡§ö‡•Å‡§®‡•Ä ‡§ó‡§à ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
});


function insertCustomCards() {
    const customCards = [
        
        {
            image: 'https://files.cdn-files-a.com/uploads/10456964/normal_69535f33277ed.png',
            link: 'go:cumagazine',
            pubDate: new Date()
        },
        
         {
            image: 'https://m2.getsitecontrol.com/images/273034/08fa5e9b171cf9fb5f7ce513fa1b8c4f_351164357.png',
            link: 'go:cuseries',
            pubDate: new Date()
        },
        
        
    ];

    if (articles.length > 30) {
        let insertedIndexes = new Set(); // ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§ø‡§è ‡§ó‡§è ‡§á‡§Ç‡§°‡•á‡§ï‡•ç‡§∏ ‡§ï‡•ã ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è

        customCards.forEach(card => {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * 15) + 1; // 1 ‡§∏‡•á 10 ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∞‡•à‡§Ç‡§°‡§Æ ‡§®‡§Ç‡§¨‡§∞
            } while (insertedIndexes.has(randomIndex)); // ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§á‡§Ç‡§°‡•á‡§ï‡•ç‡§∏ ‡§®‡§æ ‡§π‡•ã

            insertedIndexes.add(randomIndex);
            articles.splice(randomIndex, 0, card); // ‡§∞‡•à‡§Ç‡§°‡§Æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ê‡§° ‡§ï‡§∞‡•á‡§Ç
        });
    }
}

function displayNews() {
  const container = document.getElementById('newsContainer');
  container.innerHTML = '';
  articles.forEach((article, index) => {
    let newsCard = document.createElement('div');
    newsCard.className = 'news-card';
    newsCard.setAttribute('data-index', index);        // ‡§ú‡§∞‡•Ç‡§∞‡•Ä: index attribute
    if (index === 0) {
      newsCard.classList.add('active');               // ‡§™‡§π‡§≤‡§æ card active ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è
    }
    newsCard.style.transform = `translateY(${index * 100}%)`;

    let titleHTML = article.title ? `<h2>${article.title}</h2>` : '';
    let descriptionHTML = article.description ? `<p>${article.description}</p>` : '';

        const customImages = [  

        "https://files.cdn-files-a.com/uploads/10456964/normal_69535f33277ed.png",
        "https://m2.getsitecontrol.com/images/273034/08fa5e9b171cf9fb5f7ce513fa1b8c4f_351164357.png",
        
       
];

if (customImages.includes(article.image)) {
  newsCard.classList.add("custom-card");
  newsCard.innerHTML = `
    <img src="${article.image}"
     onclick="location.href='${article.link}'"
     style="width:100%;height:100%;display:block;cursor:pointer;">
  `;
  container.appendChild(newsCard);
  return; // ‚õî IMPORTANT: normal layout apply ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡§æ
}
    
        let img = article.image ? `<img src="${article.image}" onclick="location.href='${article.link}', '_blank')" style="cursor:pointer;">` : '';

        newsCard.innerHTML = `
      ${titleHTML}
      ${descriptionHTML}
      ${img}
      <div class="publish-time">${getTimeAgo(article.pubDate)}</div>
      <div class="like-btn" onclick="toggleLike(${index})">
        <i class="fas ${isLiked(article.link) ? 'fa-heart' : 'fa-heart-circle-plus'}"></i>
        <span111 class="save-text"> ${isLiked(article.link) ? 'Saved' : 'Save'}</span111>
      </div>
    `;

    newsCard.setAttribute("data-url", article.link || '');
    container.appendChild(newsCard);
  });
  
  // Reset index & position after render
  currentIndex = 0;
  updateSlide();
}

function isLiked(link) {
    const liked = JSON.parse(localStorage.getItem("likedFeeds") || "[]");
    return liked.some(item => item.link === link);
}

function toggleLike(index) {
    const article = articles[index];
    let liked = JSON.parse(localStorage.getItem("likedFeeds") || "[]");

    const exists = liked.find(item => item.link === article.link);

    if (exists) {
        liked = liked.filter(item => item.link !== article.link);
    } else {
        const newArticle = { ...article, likedAt: new Date().toISOString() };
        liked.unshift(newArticle); // ‡§π‡§æ‡§≤ ‡§π‡•Ä ‡§Æ‡•á‡§Ç ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•Ä ‡§ó‡§à ‡§´‡•Ä‡§° ‡§∏‡§¨‡§∏‡•á ‡§ä‡§™‡§∞
    }

    localStorage.setItem("likedFeeds", JSON.stringify(liked));

    // ‚úÖ ‡§Ü‡§á‡§ï‡§® ‡§î‡§∞ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
    const newsCard = document.querySelectorAll('.news-card')[index];
    if (newsCard) {
        const iconEl = newsCard.querySelector('.like-btn i');
        const textEl = newsCard.querySelector('.like-btn .save-text');

        if (iconEl && textEl) {
            if (exists) {
                iconEl.classList.remove('fa-heart');
                iconEl.classList.add('fa-heart-circle-plus');
                textEl.textContent = 'Save';
            } else {
                iconEl.classList.remove('fa-heart-circle-plus');
                iconEl.classList.add('fa-heart');
                textEl.textContent = 'Saved';
            }
        }
    }
}


function getTimeAgo(dateString) {
    const now = new Date();
    const publishedDate = new Date(dateString);
    const secondsAgo = Math.floor((now - publishedDate) / 1000);

    const intervals = {
        year: 31536000,
        month: 2592000,
        week: 604800,
        day: 86400,
        hour: 3600,
        minute: 60,
        second: 1
    };

    for (let key in intervals) {
        const interval = Math.floor(secondsAgo / intervals[key]);
        if (interval >= 1) {
            return `${interval} ${key}${interval > 1 ? 's' : ''} ago`;
        }
    }

    return "just now";
}


// **Swipe Left ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§≤‡§ø‡§Ç‡§ï ‡§ì‡§™‡§®**
function handleSwipe() {
    if (endX < startX - 50) {
        window.open(articles[currentIndex].link, '_blank');
    } else if (endY < startY - 50) {
        nextSlide();
    } else if (endY > startY + 50) {
        prevSlide();
    }
}

//  **Refresh Popup Function**
<!-- Refresh Popup Function -->
function showRefreshPopup() {
    let popup = document.getElementById("refreshPopup");
    if (!popup) {
        popup = document.createElement('div');
        popup.id = "refreshPopup";
        popup.innerHTML = `
            <div class="popup-box">
  <button onclick="refreshNewsFeed()" style="font-size: 15px; padding: 16px 17px;">
    <i class="fas fa-arrows-rotate"></i>
  </button>
</div>
        `;
        document.body.appendChild(popup);

        // Slide-up animation trigger
        setTimeout(() => {
            popup.style.bottom = "20px";
            popup.style.opacity = "1";
        }, 20);
    }
}

// Hide Refresh Popup
function hideRefreshPopup() {
    let popup = document.getElementById("refreshPopup");
    if (popup) {
        popup.style.opacity = "0";
        popup.style.bottom = "-50px"; // Slide down before removal
        setTimeout(() => popup.remove(), 300);
    }
}


loadNews();

    </script>
   
</body>
</html>

<script>
        document.addEventListener("DOMContentLoaded", function () {
            const popup = document.getElementById("popup2");
            const checkbox = document.getElementById("consentCheckbox");
            const consentLabel = document.getElementById("consentLabel");
            const closeBtn = document.getElementById("closeBtn2");

            // ‡§™‡§π‡§≤‡•á ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø popup ‡§™‡§π‡§≤‡•á ‡§π‡•Ä ‡§¨‡§Ç‡§¶ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç
            if (localStorage.getItem("popup2Closed")) {
                popup.style.display = "none";
            }

            // ‡§ö‡•á‡§ï‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ö‡•á‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§¨‡§ü‡§® ‡§ï‡•ã ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ ‡§ï‡§∞‡•á‡§Ç
            checkbox.addEventListener("change", function () {
                if (this.checked) {
                    closeBtn.classList.add("active");
                } else {
                    closeBtn.classList.remove("active");
                }
            });

            // Close ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§á‡§µ‡•á‡§Ç‡§ü
            closeBtn.addEventListener("click", function () {
                if (checkbox.checked) {
                    popup.style.display = "none";
                    localStorage.setItem("popup2Closed", "true"); // ‡§≤‡•ã‡§ï‡§≤ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
                } else {
                    checkbox.classList.add("checkbox-error"); // ‡§∞‡•á‡§° ‡§¨‡•â‡§∞‡•ç‡§°‡§∞ ‡§î‡§∞ ‡§∂‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç
                    consentLabel.classList.add("text-error"); // ‡§ï‡§Ç‡§∏‡•á‡§Ç‡§ü ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§≠‡•Ä ‡§∞‡•á‡§° ‡§ï‡§∞‡•á‡§Ç
                    setTimeout(() => {
                        checkbox.classList.remove("checkbox-error"); // 1 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§π‡§ü‡§æ‡§è‡§Å
                        consentLabel.classList.remove("text-error"); // 1 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§π‡§ü‡§æ‡§è‡§Å
                    }, 2000);
                }
            });
        });
    </script>
    <script>
  const tabs = document.querySelectorAll('.tab');
  const persistentTabCode = 'ca'; // ‡§π‡§Æ‡•á‡§∂‡§æ active ‡§∞‡§π‡§®‡•á ‡§µ‡§æ‡§≤‡§æ tab

  // ‡§∂‡•Å‡§∞‡•Ç ‡§Æ‡•á‡§Ç 'ca' tab ‡§ï‡•ã active ‡§∞‡§ñ‡•á‡§Ç
  window.addEventListener('DOMContentLoaded', () => {
    tabs.forEach(tab => {
      const code = tab.getAttribute('data-code');
      if (code === persistentTabCode) {
        tab.classList.add('active');
      } else {
        tab.classList.remove('active');
      }
    });
  });

  // ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§™‡§∞ 3 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è animation ‡§î‡§∞ redirection
  tabs.forEach(tab => {
    const code = tab.getAttribute('data-code');
    
    if (code !== persistentTabCode) {
      tab.addEventListener('click', () => {
        tab.classList.add('active');

        // 3 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ remove
        setTimeout(() => {
          tab.classList.remove('active');
        }, 3000);

        const url = tab.getAttribute('data-url');
        setTimeout(() => {
          window.location.href = url;
        }, 100);
      });
    }
  });
</script>
<style>
#tabWrapper {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 100000;
  display: flex;
  align-items: center;
  background: transparent;
  transition: top 0.4s ease-in-out;
}

.tabs {
  display: flex;
  flex: 1;
  min-width:100%;
  background: yellow;
  margin-top:-4px;
  overflow:hidden;
  padding: 15px 0px;
  border-radius:0px 5px 5px 0px;
  gap: 13px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.5), 0 0 0 1px #fff inset;
  justify-content: center;
  transition: transform 0.4s ease;
}

.tabs button {
  box-shadow: 0 2px 10px rgba(0,0,0,0.5), 0 0 0 1px #fff inset;
  font-weight: bold;
  padding: 5px 14px;
  font-family:kadwa;
  background: #e0e0e0;
  border: none;
  border-radius: 5px;
  font-size: 10px;
  cursor: pointer;
  transition: background 0.3s;
}

.tabs button:hover {
  background: #dcdcdc;
}

/* Translate Button ‡§ï‡§æ Best UI ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
.translate-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 10px !important;
  background: #fff !important;
  color: #333;
}
.translate-btn:hover {
  background: #f0f0f0 !important;
}

/* ‡§ú‡§¨ tabs ‡§õ‡•Å‡§™ ‡§ú‡§æ‡§è‡§Å */
.tab-hidden .tabs {
  transform: translateY(-100%);
  opacity: 0;
  pointer-events: none;
}

#tabs button.active {
  color: white;
  background-color: #007bff;
}

/* Modern UI for Toggle Button */
#toggleTabs {
  position: fixed;
  right: -4px; /* ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ï‡•á ‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§¶‡§æ‡§à‡§Ç ‡§ì‡§∞ ‡§ö‡§ø‡§™‡§ï‡§æ ‡§π‡•Å‡§Ü */
  top: 450px;
  width: 28px; /* ‡§ü‡•à‡§™ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•á‡§π‡§§‡§∞ ‡§ö‡•å‡§°‡§º‡§æ‡§à */
  height: 56px; /* ‡§ü‡•à‡§™ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•á‡§π‡§§‡§∞ ‡§ä‡§Ç‡§ö‡§æ‡§à */
  background: linear-gradient(135deg, #ff3b3b, #d90429); /* ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§∞‡•á‡§° ‡§ó‡•ç‡§∞‡•á‡§°‡§ø‡§è‡§Ç‡§ü */
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 12px 0 0 12px; /* ‡§¨‡§æ‡§Ø‡•Ä‡§Ç ‡§§‡§∞‡§´ ‡§∏‡•á ‡§∏‡•ç‡§Æ‡•Ç‡§• ‡§ó‡•ã‡§≤ ‡§Ü‡§ï‡§æ‡§∞ */
  box-shadow: -4px 0 12px rgba(217, 4, 41, 0.3), inset 1px 0 0 rgba(255, 255, 255, 0.2);
  cursor: pointer;
  z-index: 100000;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  user-select: none;
}

/* Hover ‡§á‡§´‡§º‡•á‡§ï‡•ç‡§ü - ‡§Æ‡§æ‡§â‡§∏ ‡§≤‡•á ‡§ú‡§æ‡§®‡•á ‡§™‡§∞ ‡§π‡§≤‡•ç‡§ï‡§æ ‡§∏‡§æ ‡§¨‡§æ‡§π‡§∞ ‡§Ü‡§è‡§ó‡§æ */
#toggleTabs:hover {
  width: 32px;
  background: linear-gradient(135deg, #ff4f4f, #e60026);
}

#toggleIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* ‡§¨‡§æ‡§â‡§Ç‡§∏‡§ø‡§Ç‡§ó ‡§´‡•ç‡§≤‡§ø‡§™ ‡§á‡§´‡§º‡•á‡§ï‡•ç‡§ü */
}

/* ‡§ú‡§¨ tabs ‡§õ‡•Å‡§™ ‡§ú‡§æ‡§è‡§Å, ‡§§‡•ã ‡§ê‡§∞‡•ã (Arrow) ‡§ò‡•Ç‡§Æ ‡§ú‡§æ‡§è‡§ó‡§æ */
.tab-hidden #toggleIcon {
  transform: rotate(180deg);
}
</style>

<div id="tabWrapper">
  <div id="tabs" class="tabs">
    <button onclick="selectFeed(0)">‡§°‡•á‡§≤‡•Ä ‡§ï‡§∞‡•á‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏</button>
    <button onclick="selectFeed(1)">‡§¶ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ç | TOI</button>
    <button onclick="selectFeed(2)"><i Style="color:red; font-size:18px;" class="fas fa-heart"></i></button>
    
    <button class="translate-btn" onclick="showLanguagePopup()" title="Change Language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
        <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
      </svg>
    </button>
  </div>
  
  <div id="toggleTabs" onclick="toggleTabs()">
  <span111 id="toggleIcon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 18l-6-6 6-6"/>
    </svg>
  </span111>
</div>

<script>
let tabWrapper = document.getElementById('tabWrapper');
let toggleIcon = document.getElementById('toggleIcon');
let hideTimeout;

function toggleTabs() {
  tabWrapper.classList.toggle('tab-hidden');
  if (!tabWrapper.classList.contains('tab-hidden')) {
    autoHideTabs();
  }
}

function autoHideTabs() {
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(() => {
    tabWrapper.classList.add('tab-hidden');
  }, 5000); // Auto-hide after 5 seconds
}

document.addEventListener('click', function (event) {
  const isClickInside = tabWrapper.contains(event.target);
  // k=8 ‡§®‡§æ‡§Æ ‡§ï‡•Ä ‡§ü‡§æ‡§á‡§™‡•ã ‡§ï‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§∏‡•á ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à
  if (!isClickInside) {
    tabWrapper.classList.add('tab-hidden');
  }
});

window.onload = () => {
  autoHideTabs();
};
</script>
<script>
if ("serviceWorker" in navigator) {

  const swCode = `
    const CACHE_NAME = "auto-cache-v20";

    self.addEventListener("install", e => {
      self.skipWaiting();
    });

    self.addEventListener("activate", e => {
      e.waitUntil(
        caches.keys().then(keys => {
          return Promise.all(
            keys.map(k => {
              if (k !== CACHE_NAME) return caches.delete(k);
            })
          );
        })
      );
      self.clients.claim();
    });

    self.addEventListener("fetch", e => {
      const req = e.request;

      // ‚ùå IMPORTANT FIX ‚Üí NEVER CACHE HTML
      if (req.headers.get("accept").includes("text/html")) {
        return; // HTML always from network
      }

      // Cache only images, css, js, icons
      if (
        req.destination === "image" ||
        req.destination === "style" ||
        req.destination === "script" ||
        req.url.includes("icon")
      ) {
        e.respondWith(
          caches.match(req).then(res => {
            return res || fetch(req).then(netRes => {
              return caches.open(CACHE_NAME).then(cache => {
                cache.put(req, netRes.clone());
                return netRes;
              });
            });
          })
        );
      }
    });
  `;

  const blob = new Blob([swCode], { type: "application/javascript" });
  const swURL = URL.createObjectURL(blob);
  navigator.serviceWorker.register(swURL);
}
</script>

<script>
function autoFitText() {
    const newsCards = document.querySelectorAll('.news-card');

    newsCards.forEach(card => {
        // ‡§™‡•Ç‡§∞‡•á ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§∏‡§≠‡•Ä p ‡§î‡§∞ span ‡§ï‡•ã ‡§ö‡•Å‡§®‡•á‡§Ç (‡§ö‡§æ‡§π‡•á ‡§µ‡•á ‡§ï‡§π‡•Ä‡§Ç ‡§≠‡•Ä ‡§π‡•ã‡§Ç)
        const paragraphs = card.querySelectorAll('p');
        const spans = card.querySelectorAll('span');
        
        let maxSize = 15; 
        let minSize = 10; // ‡§á‡§∏‡§∏‡•á ‡§õ‡•ã‡§ü‡§æ ‡§´‡•â‡§®‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡§æ
        let currentSize = maxSize;

        // ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ú‡•ã p ‡§î‡§∞ span ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§è‡§ï ‡§∏‡§æ‡§• ‡§´‡•â‡§®‡•ç‡§ü ‡§Ö‡§™‡•ç‡§≤‡§æ‡§à ‡§ï‡§∞‡•á‡§ó‡§æ
        const applyFontSize = (size) => {
            paragraphs.forEach(p => p.style.setProperty('font-size', size + 'px', 'important'));
            spans.forEach(span => span.style.setProperty('font-size', size + 'px', 'important'));
        };

        // 1. ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§∏‡§æ‡§á‡§ú ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        applyFontSize(currentSize);

        // ‡§ì‡§µ‡§∞‡§´‡•ç‡§≤‡•ã ‡§ö‡•á‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§§‡§∞‡•Ä‡§ï‡§æ
        const checkOverflow = () => {
            // ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ì‡§µ‡§∞‡§´‡•ç‡§≤‡•ã ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à
            if (card.scrollHeight > card.clientHeight) return true;
            
            // ‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡•ã‡§à p ‡§ü‡•à‡§ó ‡§ì‡§µ‡§∞‡§´‡•ç‡§≤‡•ã ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à
            let isOverflowing = false;
            paragraphs.forEach(p => {
                if (p.scrollHeight > p.clientHeight) isOverflowing = true;
            });
            return isOverflowing;
        };

        // 2. ‡§ë‡§ü‡•ã-‡§∂‡•ç‡§∞‡§ø‡§Ç‡§ï ‡§≤‡•â‡§ú‡§ø‡§ï: ‡§ú‡§¨ ‡§§‡§ï ‡§ì‡§µ‡§∞‡§´‡•ç‡§≤‡•ã ‡§π‡•à, ‡§´‡•â‡§®‡•ç‡§ü ‡§ò‡§ü‡§æ‡§§‡•á ‡§∞‡§π‡•á‡§Ç
        while (checkOverflow() && currentSize > minSize) {
            currentSize -= 0.5; // ‡§´‡•â‡§®‡•ç‡§ü ‡§ï‡•ã 0.5px ‡§∏‡•á ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç
            applyFontSize(currentSize);
        }
    });
}

// ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§î‡§∞ ‡§∞‡§ø‡§∏‡§æ‡§á‡§ú‡§º ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ö‡§≤‡§æ‡§è‡§Ç
window.addEventListener('load', autoFitText);
window.addEventListener('resize', autoFitText);
setTimeout(autoFitText, 500); // ‡§´‡•â‡§®‡•ç‡§ü ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§î‡§∞
</script>

  </div>
</div>  </div>
</div>  </div>
</div>  </div>
</div>
